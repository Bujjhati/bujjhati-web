---
export interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
}

const { 
  title = "Bujjhati | Music, Art & Consciousness â™…",
  description = "Mexican creator, dj/producer of dance underground music and a tech entrepreneur. Playing melodic techno all the way to organic house, the sounds he shares are all about dancing and having a moment to escape into our souls.",
  ogImage = "/images/OPEN-GRAPH.jpg"
} = Astro.props;
---

<!DOCTYPE html>
<html data-wf-page="649f2d8fbd81b82edf00704f" data-wf-site="649f2d8fbd81b82edf006fc4">
<head>
  <meta charset="utf-8">
  <title>{title}</title>
  <meta content={description} name="description">
  <meta content={title} property="og:title">
  <meta content={description} property="og:description">
  <meta content={ogImage} property="og:image">
  <meta content={title} property="twitter:title">
  <meta content={description} property="twitter:description">
  <meta content={ogImage} property="twitter:image">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="3nZlKjhvGj0Z_kz27EN4Tuud_MGcirm4nefVWHcQmC0" name="google-site-verification">
  <meta content="Webflow" name="generator">
  
  <!-- CSS Files -->
  <link href="/css/normalize.css" rel="stylesheet" type="text/css">
  <link href="/css/webflow.css" rel="stylesheet" type="text/css">
  <link href="/css/bujjhati.webflow.css" rel="stylesheet" type="text/css">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Exo:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Tenor Sans:regular","Source Serif Pro:regular,700","Libre Franklin:regular,600"]  }});</script>
  
  <!-- Webflow JS -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  
  <!-- Favicon -->
  <link href="/images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="/images/webclip.jpg" rel="apple-touch-icon">
  
  <!-- Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-SK16M94RYV"></script>
  <script type="text/javascript">window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('set', 'developer_id.dZGVlNj', true);gtag('config', 'G-SK16M94RYV');</script>
  
  <!-- Facebook Pixel -->
  <script type="text/javascript">!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.agent='plwebflow';n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');fbq('init', '589657956397951');fbq('track', 'PageView');</script>
  
  <style>
    html, body {
      margin: 0;
      padding: 0;
    }
    body {
      -moz-font-feature-settings: "liga" on;
      -moz-osx-font-smoothing: grayscale;
      -webkit-font-smoothing: antialiased;
      font-feature-settings: "liga" on;
      text-rendering: optimizeLegibility;
    }
    .background--custom {
      background: linear-gradient(45deg, #50ACA2, #E97F4E, #000000, #2A0000);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      width: 100vw;
      height: 100vh;
      position: absolute;
      z-index: -2;
      top: 0;
      left: 0;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    canvas#canvas {
      z-index: -1;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      transform: rotate(0deg) scale(1) translateY(0%);
      --gradient-color-1: #50ACA2; 
      --gradient-color-2: #E97F4E; 
      --gradient-color-3: #000000;  
      --gradient-color-4: #2A0000;
      --gradient-speed: 0.000008;
    }
  </style>
</head>
<body class="body">
  <slot />
  
  <!-- Scripts -->
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=649f2d8fbd81b82edf006fc4" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="/js/webflow.js" type="text/javascript"></script>
  
  <!-- Background Canvas -->
  <div class="background--custom">
    <canvas id="canvas"></canvas>
  </div>
  
  <!-- Gradient Script -->
  <script src="/js/minigl.js?v=2" is:inline></script>
  <script>
    // Enhanced gradient initialization for deployment compatibility
    function initGradient() {
      console.log('Attempting to initialize gradient...');
      console.log('Gradient object available:', typeof Gradient !== 'undefined');
      
      // @ts-ignore
      if (typeof Gradient !== 'undefined') {
        try {
          // @ts-ignore
          var gradient = new Gradient();
          gradient.initGradient("#canvas");
          console.log('Gradient initialized successfully');
          
          // Hide CSS gradient when JS gradient loads successfully
          const backgroundDiv = document.querySelector('.background--custom');
          if (backgroundDiv) {
            backgroundDiv.style.background = 'transparent';
            console.log('CSS gradient hidden, JS gradient active');
          }
          
          return true;
        } catch (error) {
          console.error('Error initializing gradient:', error);
          return false;
        }
      } else {
        console.log('Gradient not available, retrying...');
        return false;
      }
    }
    
    // Multiple initialization strategies for deployment compatibility
    function tryInitGradient() {
      let attempts = 0;
      const maxAttempts = 10;
      
      function attempt() {
        attempts++;
        console.log(`Gradient initialization attempt ${attempts}/${maxAttempts}`);
        
        if (initGradient()) {
          console.log('Gradient successfully initialized!');
          return;
        }
        
        if (attempts < maxAttempts) {
          setTimeout(attempt, 300 * attempts); // Increasing delay
        } else {
          console.warn('Failed to initialize gradient after all attempts');
          // Fallback: try to load script dynamically
          loadGradientScript();
        }
      }
      
      attempt();
    }
    
    // Dynamic script loading as fallback
    function loadGradientScript() {
      console.log('Attempting dynamic script loading...');
      const script = document.createElement('script');
      script.src = '/js/minigl.js?v=2';
      script.onload = function() {
        console.log('Dynamic script loaded, retrying gradient init...');
        setTimeout(initGradient, 100);
      };
      script.onerror = function() {
        console.error('Failed to load gradient script dynamically');
      };
      document.head.appendChild(script);
    }
    
    // Start initialization
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', tryInitGradient);
    } else {
      tryInitGradient();
    }
    
    // Additional fallbacks
    window.addEventListener('load', function() {
      setTimeout(tryInitGradient, 100);
    });
    
    // Final fallback after 3 seconds
    setTimeout(function() {
      console.log('Final gradient initialization attempt...');
      tryInitGradient();
    }, 3000);
  </script>
</body>
</html>
